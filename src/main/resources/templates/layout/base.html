<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title th:text="${title} ?: 'Sec30 Music'">Sec30 Music</title>
  <link rel="stylesheet" th:href="@{/css/base.css}">
  <link rel="stylesheet" th:href="@{/css/layout.css}">
  <link rel="stylesheet" th:href="@{/css/home.css}">
  <link rel="stylesheet" th:href="@{/css/playlist.css}">
  <link rel="stylesheet" th:href="@{/css/mypage.css}">
  <link rel="stylesheet" th:href="@{/css/music-player.css}">
  <th:block layout:fragment="head"></th:block>
</head>
<body>
  <div class="app-wrapper">
    <aside class="sidebar" th:replace="~{layout/sidebar :: sidebar}"></aside>
    <div class="main-area">
      <header class="topbar" th:replace="~{layout/header :: header}"></header>
      <main class="content">
        <div class="container">
          <div layout:fragment="content"></div>
        </div>
      </main>
    </div>
  </div>

  <!-- 고정 하단 뮤직 플레이어 -->
  <div id="music-player" class="music-player" style="display: none;">
    <audio id="audio-element"></audio>
    <div class="player-content">
      <div class="player-track-info">
        <img id="player-album-image" class="player-album-art" src="" alt="">
        <div class="player-track-details">
          <div id="player-track-name" class="player-track-name">-</div>
          <div id="player-artist-name" class="player-artist-name">-</div>
        </div>
      </div>
      <div class="player-controls">
        <button id="btn-prev" class="control-btn" onclick="musicPlayer.prev()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/>
          </svg>
        </button>
        <button id="btn-play-pause" class="control-btn control-btn-large" onclick="musicPlayer.togglePlay()">
          <svg id="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M8 5v14l11-7z"/>
          </svg>
          <svg id="pause-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" style="display:none;">
            <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
          </svg>
        </button>
        <button id="btn-next" class="control-btn" onclick="musicPlayer.next()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M16 18h2V6h-2zm-11-7l8.5-6v12z"/>
          </svg>
        </button>
      </div>
      <div class="player-progress">
        <span id="current-time" class="time-label">0:00</span>
        <input id="progress-bar" type="range" class="progress-bar" min="0" max="100" value="0" onchange="musicPlayer.seek(this.value)">
        <span id="duration-time" class="time-label">0:00</span>
      </div>
      <div class="player-actions">
        <button class="control-btn" onclick="musicPlayer.openSpotify()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm3.61 14.34c-.23.39-.72.51-1.11.28-3.04-1.86-6.87-2.28-11.37-1.25-.46.11-.92-.18-1.03-.64-.11-.46.18-.92.64-1.03 4.94-1.12 9.14-.64 12.63 1.45.39.23.51.72.28 1.11v.08zm1.58-3.51c-.29.47-.91.61-1.38.32-3.48-2.14-8.78-2.76-12.9-1.51-.55.17-1.14-.13-1.31-.68-.17-.55.13-1.14.68-1.31 4.71-1.43 10.54-.74 14.56 1.73.47.28.61.91.32 1.38l.03.07zm.14-3.64C13.73 7.03 7.98 6.84 4.65 7.82c-.66.19-1.36-.18-1.55-.84-.19-.66.18-1.36.84-1.55 3.81-1.12 10.22-.9 14.41 1.74.57.34.76 1.08.42 1.65-.34.57-1.08.76-1.65.42l.21-.05z"/>
          </svg>
        </button>
        <button class="control-btn" onclick="musicPlayer.close()">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <script th:src="@{/js/music-player.js}"></script>
  <th:block layout:fragment="scripts"></th:block>
</body>
</html>

