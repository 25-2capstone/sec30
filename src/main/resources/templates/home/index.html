<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/base}">
<head>
  <title>í™ˆ - Sec30 Music</title>
</head>
<body>
  <div layout:fragment="content">
    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-card">
        <h1>Discover Weekly</h1>
        <p>ë‹¹ì‹ ë§Œì„ ìœ„í•œ ìƒˆë¡œìš´ ìŒì•… ë°œê²¬</p>
        <button class="play-btn" onclick="window.location.href='/tracks'">ì§€ê¸ˆ ë“£ê¸°</button>
      </div>
    </section>

    <!-- ì¸ê¸° íŠ¸ë™ ì„¹ì…˜ -->
    <section class="home-section">
      <div class="section-header">
        <h2 class="section-title">ì˜¤ëŠ˜ì˜ ì¸ê¸° íŠ¸ë™</h2>
        <a href="/tracks" class="section-link">ëª¨ë‘ ë³´ê¸° â†’</a>
      </div>

      <div class="track-grid" th:if="${tracks != null and !tracks.isEmpty()}">
        <div class="track-card" th:each="track : ${tracks}">
          <div class="track-card-image">
            <img th:src="${track.albumImage}"
                 th:alt="${track.name}"
                 onerror="this.src='https://via.placeholder.com/300x300?text=No+Image'">
            <button class="track-card-play"
                    th:attr="data-preview=${track.previewUrl}"
                    onclick="playTrack(this)"></button>
          </div>
          <div class="track-card-title" th:text="${track.name}">Track Name</div>
          <div class="track-card-artist" th:text="${track.artist}">Artist</div>
        </div>
      </div>

      <div class="empty-state" th:if="${tracks == null or tracks.isEmpty()}">
        <div class="empty-state-icon">ğŸµ</div>
        <div class="empty-state-title">íŠ¸ë™ì´ ì—†ìŠµë‹ˆë‹¤</div>
        <div class="empty-state-desc">ìŒì•…ì„ ê²€ìƒ‰í•˜ê±°ë‚˜ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”</div>
      </div>
    </section>

    <!-- ì¶”ì²œ ë¯¹ìŠ¤ ì„¹ì…˜ -->
    <section class="recommended" th:if="${mixes != null and !mixes.isEmpty()}">
      <h2>íšŒì›ë‹˜ì„ ìœ„í•œ ë§ì¶¤ ë¯¹ìŠ¤</h2>
      <div class="cards">
        <div class="card" th:each="mix : ${mixes}">
          <img th:src="${mix.imageUrl}"
               th:alt="${mix.title}"
               onerror="this.src='https://via.placeholder.com/300x300?text=Mix'">
          <div class="card-title" th:text="${mix.title}">Mix Title</div>
          <div class="card-subtitle" th:text="${mix.description}">Mix Description</div>
        </div>
      </div>
    </section>
  </div>

  <th:block layout:fragment="scripts">
    <audio id="global-player" style="display:none;"></audio>
    <script>
      function playTrack(button) {
        const previewUrl = button.getAttribute('data-preview');
        if (!previewUrl) {
          alert('ë¯¸ë¦¬ë“£ê¸°ë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ” ê³¡ì…ë‹ˆë‹¤.');
          return;
        }

        const player = document.getElementById('global-player');
        if (player.src === previewUrl && !player.paused) {
          player.pause();
          button.style.background = '#1DB954';
        } else {
          player.src = previewUrl;
          player.play();
          button.style.background = '#1ed760';
        }
      }
    </script>
  </th:block>
</body>
</html>

